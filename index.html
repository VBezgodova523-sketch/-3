<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --accent-color: #00f2ff; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; overflow: hidden; background: transparent; }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ */
        .draggable {
            width: 100px;
            height: 100px;
            background: white;
            border: 3px solid #ccc;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: grab;
            position: absolute;
            user-select: none;
            transition: transform 0.2s, box-shadow 0.2s;
            z-index: 10;
        }

        .draggable:hover { transform: scale(1.1); box-shadow: 0 0 15px var(--accent-color); }
        .draggable.neon { box-shadow: 0 0 10px var(--accent-color); border-color: var(--accent-color); }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–æ–Ω –æ—Ç–≤–µ—Ç–æ–≤ */
        .dropzone {
            width: 120px;
            height: 120px;
            border: 3px dashed #aaa;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            background: rgba(255,255,255,0.1);
        }

        .dropzone.highlight {
            border-color: var(--accent-color);
            background: rgba(0, 242, 255, 0.2);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--accent-color);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è —É—Å–ø–µ—Ö–∞ */
        @keyframes success-pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .matched { animation: success-pop 0.5s ease; pointer-events: none; opacity: 0.8; }

        #feedback {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 20px;
            display: none;
            font-weight: bold;
            z-index: 100;
        }
    </style>
</head>
<body>

<div id="feedback"></div>
<div id="game-container">
    </div>

<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script>
/**
 * –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–ë—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä)
 */
const config = {
    settings: {
        neon: true,
        soundEnabled: true,
        fontFamily: 'Arial',
        language: 'ru',
        feedbackSuccess: "–û—Ç–ª–∏—á–Ω–æ!",
        feedbackError: "–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑",
        accentColor: "#00f2ff"
    },
    items: [
        { id: 1, content: "üçé", pair: "Apple", type: "text" },
        { id: 2, content: "üê±", pair: "Cat", type: "text" },
        { id: 3, content: "üöó", pair: "Car", type: "text" }
    ]
};

let matchedCount = 0;

function initGame() {
    const container = document.getElementById('game-container');
    document.documentElement.style.setProperty('--accent-color', config.settings.accentColor);

    // –°–æ–∑–¥–∞–µ–º –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤ (—Å–ø—Ä–∞–≤–∞)
    config.items.forEach((item, index) => {
        const zone = document.createElement('div');
        zone.className = 'dropzone';
        zone.id = `zone-${item.id}`;
        zone.innerHTML = `<span>${item.pair}</span>`;
        zone.style.position = 'absolute';
        zone.style.right = '10%';
        zone.style.top = `${20 + index * 25}%`;
        container.appendChild(zone);

        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã (—Å–ª–µ–≤–∞)
        const el = document.createElement('div');
        el.className = `draggable ${config.settings.neon ? 'neon' : ''}`;
        el.id = `drag-${item.id}`;
        el.innerHTML = item.content;
        el.style.left = '10%';
        el.style.top = `${20 + index * 25}%`;
        el.setAttribute('data-id', item.id);
        container.appendChild(el);
    });

    setupDragAndDrop();
}

function setupDragAndDrop() {
    interact('.draggable').draggable({
        inertia: true,
        modifiers: [
            interact.modifiers.restrictRect({
                restriction: 'parent',
                endOnly: true
            })
        ],
        listeners: {
            move(event) {
                const target = event.target;
                const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
                const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

                target.style.transform = `translate(${x}px, ${y}px)`;
                target.setAttribute('data-x', x);
                target.setAttribute('data-y', y);
            },
            end(event) {
                checkDrop(event);
            }
        }
    });

    // –ó–æ–Ω–∞ –º–∞–≥–Ω–µ—Ç–∏–∑–º–∞
    interact('.dropzone').dropzone({
        accept: '.draggable',
        overlap: 0.5,
        ondragenter(event) {
            event.target.classList.add('highlight');
            if(config.settings.soundEnabled) playSound('ting');
        },
        ondragleave(event) {
            event.target.classList.remove('highlight');
        }
    });
}

function checkDrop(event) {
    const draggable = event.target;
    const dropzone = document.querySelector('.dropzone.highlight');
    
    if (dropzone) {
        const dragId = draggable.getAttribute('data-id');
        const zoneId = dropzone.id.replace('zone-', '');

        if (dragId === zoneId) {
            // –£–°–ü–ï–•
            draggable.classList.add('matched');
            dropzone.classList.remove('highlight');
            dropzone.style.borderColor = 'green';
            showFeedback(config.settings.feedbackSuccess, 'lightgreen');
            matchedCount++;
            
            if(matchedCount === config.items.length) {
                alert("–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω! üèÜ");
            }
        } else {
            // –û–®–ò–ë–ö–ê
            resetElement(draggable);
            showFeedback(config.settings.feedbackError, '#ffcccb');
        }
    } else {
        resetElement(draggable);
    }
}

function resetElement(el) {
    el.style.transform = `translate(0px, 0px)`;
    el.setAttribute('data-x', 0);
    el.setAttribute('data-y', 0);
}

function showFeedback(text, color) {
    const fb = document.getElementById('feedback');
    fb.innerText = text;
    fb.style.backgroundColor = color;
    fb.style.display = 'block';
    setTimeout(() => fb.style.display = 'none', 1500);
}

function playSound(type) {
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ Audio –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    console.log("Play sound:", type);
}

initGame();
</script>
</body>
</html>
